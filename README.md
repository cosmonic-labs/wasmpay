# wasmpay

wasmpay is a bank-to-bank payments platform built on the [CNCF project wasmCloud](https://wasmcloud.com). It supports processing transactions between banks regardless of currency, language or country.

The wasmpay platform meets bank and regulatory requirements by supporting **custom validators**. Validators can approve or deny transactions based on custom rules, e.g. to restrict transactions to specific countries, currencies or amounts. Validators can be written in any language that can compile to a [WebAssembly Component](https://component-model.bytecodealliance.org/), even supporting rules that are described with code generated by an LLM.

## Platform architecture

![Architecture Diagram](images/arch.png)

## Transaction commit sequence

When the transaction manager receives a transaction, it validates the transaction with the wasmpay platform, the origin bank's validator, and the destination bank's validator before committing the transaction.

![Sequence Diagram](images/sequence.png)

## Detailed component descriptions

1. The platform harness component [wasmpay-platform-harness](./wasmpay-platform-harness/) is the core of the wasmpay platform. It wraps every validator component before deployment via [WebAssembly Composition tooling](https://github.com/bytecodealliance/wac). This allows validators to implement a simple interface and leave the implementation of a message bus and HTTP to the platform harness. This component can be updated and upgraded without changing the validator at all.
1. The [api-gateway](./api-gateway/) which fronts the HTTP API and serves static web assets for the wasmpay frontend.
1. The [transaction-manager](./transaction-manager/) which is responsible for validating a transaction with the wasmpay platform and the origin/destination banks. If banks don't provide their own validator, it's assumed they will allow a transaction to go through.
1. The [wasmpay-validator](./wasmpay-validator/) component which implements `wasmpay:platform/validation` for extra runtime validation logic which can be changed at runtime.
1. The [nordhaven-validator](./nordhaven-validator/) is a sample validator component which implements `wasmpay:platform/validation` for a bank that only allows USD transactions.
1. The [icamer-validator](./icamer-validator/) is a sample validator component which implements `wasmpay:platform/validation` for a bank that only allows transactions in the USA and the UK.
1. The [untrusted-validator](./untrusted-validator/) component which implements `wasmpay:platform/validation` as generated by an AI model and serves as a template for AI generated components deployed straight to Cosmonic.
